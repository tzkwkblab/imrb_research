# 目的
レビュー内容が特徴リストに当てはまるかどうかの判定において、コスト効率の高いGPT-4.1-miniを使用することで、GPT-3.5-turboと比較して精度向上が見込めるか検証する。

# 条件
- 特徴リストの要素は20個
- 各特徴が当てはまるかどうかの判定を0,1のみで出力
- 5回LLMを使用して結果の統計を取る
- モデル：gpt-4.1-mini
- temperature：0.7（前回実験と同じ）

## コスト分析
1回の分析あたり：
- 入力（約800トークン）: $0.40/1M = ¥0.048
- 出力（約200トークン）: $1.60/1M = ¥0.048
- 1回あたり合計: ¥0.096

5回試行での総コスト：¥0.48/レビュー
※ GPT-3.5-turbo（¥0.525/レビュー）と比較して約9%のコスト削減

## 実験データ

### レビューテキスト
分析対象のレビューテキストは[レビュー例2](../../../../review_example2.md)を使用しました。

## プロンプト
```prompt
あなたは商品レビューを分析する専門家です。
以下の商品レビューに対して、各特徴が当てはまるかどうかを判定してください。

【レビュー】
{review_text}

【特徴リスト】
{features_list}

回答形式：
{
    "features": {
        "1": 0 or 1,
        "2": 0 or 1,
        ...
    }
}

※ 0=特徴なし、1=特徴あり
各特徴について、当てはまる場合は1、当てはまらない場合は0で回答してください。
```

## この実験での検証ポイント
1. GPT-4.1-miniはGPT-3.5-turboと比べて判定精度が向上するか
2. 安定性は維持されるか
3. 特に前回誤判定が多かった以下の特徴の判定が改善されるか：
   - 競合製品との比較（特徴3）
   - ブランドの信頼性や評判への言及（特徴9）
   - 製品使用環境の説明（特徴18）

## 期待される改善点
1. より深い文脈理解による判定精度の向上
2. 暗示的な表現からの特徴検出能力の向上
3. 誤検出（false positive）の減少
4. コスト効率の改善（同等以上の性能を低コストで実現）

## 実験の意義
- GPT-4.1-miniは、GPT-3.5-turboよりも低コストで高性能な判定が期待できる
- 特に安定性1.00で誤判定していた特徴（3,9,18）の改善が期待される
- コスト削減と性能向上の両立が可能か検証

## 結果

生データは[1623.csv](1623.csv)を参照してください。

### 1. 判定精度
- 正解数: 14/20 (70%)
- 誤判定数: 6/20 (30%)
- 平均安定性: 0.99

### 2. 安定性分布
- 安定性1.00: 19件
- 安定性0.80: 1件（特徴18のみ）

### 3. 誤判定の内訳
- 検出漏れ（False Negative）: 6件
  - 特徴2: 技術的詳細
  - 特徴6: 初期セットアップ
  - 特徴10: 購入プロセス
  - 特徴12: 製品の耐久性/品質
  - 特徴18: 製品使用環境
  - 特徴20: ユーザーへのアドバイス
- 過剰検出（False Positive）: 0件

### 4. GPT-3.5-turboとの比較
- 正解率: 同じく70%
- 安定性: 0.95 → 0.99に向上
- コスト: ¥0.525 → ¥0.48に削減（約9%減）

## 考察

### 1. 判定の安定性
- GPT-4.1-miniは非常に高い安定性（0.99）を示した
- 特徴18を除く全ての特徴で完全な安定性（1.00）を達成
- GPT-3.5-turboと比べて判定の一貫性が向上

### 2. 誤判定の傾向
- 全ての誤判定が検出漏れ（False Negative）
- 過剰検出（False Positive）が0件という特徴
- 特に文脈的な理解を要する特徴（技術詳細、使用環境など）での見落としが目立つ

### 3. コスト効率
- 同等の正解率を維持しながら、コストを9%削減
- 安定性の向上により、試行回数削減の可能性も示唆

### 4. 今後の課題
1. プロンプトの改善
   - 特に文脈的な特徴の検出能力向上
   - 判定基準のより明確な提示

2. 試行回数の最適化
   - 高い安定性を活かした試行回数の削減検討
   - 3回試行への削減でさらなるコスト削減の可能性

3. 特徴定義の見直し
   - 特に見落としが多い特徴の定義を明確化
   - 判定基準の具体例追加

## 結論
GPT-4.1-miniは、GPT-3.5-turboと比較して：
1. 同等の正解率（70%）を維持
2. より高い判定安定性を実現（0.99）
3. コストを9%削減

特に過剰検出がなく、見落としのみが課題という特徴は、プロンプト改善による精度向上の余地を示唆しています。コスト効率と安定性の面で、GPT-4.1-miniは有望な選択肢と言えます。