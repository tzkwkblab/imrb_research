# 実験レポート：Markdown レビュー特徴抽出・分割処理検証

## 実験概要

- 実験日時：2025-05-19 16:54
- 実験者：清野駿
- 実験 ID：exp-20250519-01

## 目的

人間がアノテーションした Markdown 形式のレビューから特徴情報を抽出し、機械学習モデルの学習・評価に適した形式（CSV）への変換と、特定特徴の有無に基づいたデータ分割処理の有効性を検証する。

## 実験条件

- 使用モデル：[該当なし／または今後利用予定のモデル名]
- パラメータ：
  - temperature: [該当なし]
  - その他の設定値: test_size=0.2, random_seed=42
- 特徴リストの要素数：5
- 分析対象：Markdown 形式で記述された人手アノテーション済みレビューデータ 30 件

| feature_index | has_feature_train | has_feature_test | no_feature_train | no_feature_test |
| ------------- | ----------------- | ---------------- | ---------------- | --------------- |
| 1             | 10                | 3                | 14               | 3               |
| 2             | 11                | 3                | 13               | 3               |
| 3             | 7                 | 2                | 17               | 4               |
| 4             | 6                 | 2                | 18               | 4               |
| 5             | 17                | 4                | 7                | 2               |

## プロンプト

今回はデータ前処理・分割のため、プロンプトは該当なし

## 実験データ

- 入力データ：
  - ファイル：src/analysis/experiments/2025/05/15/validated*review*\*.md
  - 件数：30
  - 特徴：人手アノテーション済みレビュー、特徴判定（GPT・人手・コメント・最終判定）付き
- 出力結果：
  - 保存先：src/analysis/experiments/2025/05/15/processed_reviews.csv
  - 形式：CSV

## 実験結果

### 定量的分析

- 処理件数：30
- 平均処理時間：[未計測]
- エラー率：0%

### 特徴分析結果

- 判定結果の分布：各特徴ごとに「含む/含まない」および「学習/テスト」へ分割し、上記表の通りバランス良く分配された。
- 安定性スコア：[未算出]
- 特徴ごとの出現頻度：特徴 1〜5 で分布に偏りはあるが、極端な不均衡は見られなかった。

### 前回実験との比較

- 改善された点：正規表現の調整により、Markdown からのデータ抽出精度が向上。分割スクリプトの汎用性も向上。
- 悪化した点：特になし
- 変化なし：データ件数や基本的な分割ロジック

## 考察

### 成功点

- Markdown データからの特徴抽出・CSV 化が安定して実行できた。
- 特徴ごとのデータ分割処理が意図通り機能し、学習・テストセットを適切に準備できた。

### 問題点

- 特徴ごとに「含む」データの件数にばらつきがあるため、今後のモデル学習時にデータ不均衡の影響が出る可能性がある。
- 平均処理時間や安定性スコアなどの定量指標は未計測。

### 仮説の検証

- 「手動アノテーション済みレビューから特徴抽出・分割処理を経て、機械学習用データセットを安定して作成できる」という仮説は十分に支持された。

## 次のステップ

- 特徴ごとに分割したデータを用いて、機械学習モデルの学習・評価を実施する。
- データ不均衡への対応（サンプリング手法や重み付け等）を検討する。
- 処理時間や安定性の定量評価を追加で行う。
- より多様な特徴や大規模データでの検証を進める。

## 補足資料

レビューデータ分割をする実装は[こちら](./review_data_splitter.py)
