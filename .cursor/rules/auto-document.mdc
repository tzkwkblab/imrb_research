---
description: 
globs: 
alwaysApply: true
---
# 自動ドキュメント化ルール

## ドキュメント化判断基準

### 必須ドキュメント化（HIGH優先度）
- **3回以上使用**された関数・クラス・パターン
- **複数プロジェクト**で使用可能な汎用コード
- **設定・環境依存**のセットアップ手順
- **外部API連携**の認証・エラーハンドリングパターン
- **データ処理パイプライン**の共通処理

### 推奨ドキュメント化（MEDIUM優先度）
- **2回使用**された10行以上の関数
- **ドメイン固有知識**を含む処理ロジック
- **パフォーマンス最適化**のテクニック
- **デバッグ・トラブルシューティング**手順

### 除外対象（LOW優先度）
- **1回のみ使用**の単発スクリプト
- **5行未満**の単純な関数
- **プロジェクト固有**の一時的処理
- **標準的な実装**（公式ドキュメント参照で十分）

## 自動ドキュメント化ワークフロー

### 1. 実装時チェック
```python
# コード作成時に以下をコメントで記録
# @reusable: 再利用可能性（high/medium/low）
# @domain: 適用ドメイン（data/analysis/api/general）
# @usage_count: 使用回数（初回は1）
```

### 2. ドキュメント生成トリガー
- 使用回数が基準値に達した時点で自動生成
- 月次レビュー時に一括チェック
- プロジェクト完了時に総括ドキュメント化

### 3. 保存場所とフォーマット

#### 汎用関数・クラス
```
docs/reusable-components/
├── data-processing.md       # データ処理関連
├── api-integration.md       # API連携関連
├── analysis-patterns.md    # 分析パターン
└── utility-functions.md    # ユーティリティ関数
```

#### ルールファイル追加
```
.cursor/rules/
└── {domain}-patterns.mdc   # ドメイン別パターン集
```

## テンプレート

### 関数ドキュメント
```markdown
## {関数名}
**用途**: {簡潔な説明}
**再利用性**: {high/medium/low}
**使用例数**: {N回}

```python
# 使用例
{コードスニペット}
```

**注意点**: {重要な制約や前提条件}
```

### パターンドキュメント
```markdown
## {パターン名}
**適用場面**: {どんな時に使うか}
**実装例**: 
- {プロジェクト1}: {ファイルパス}
- {プロジェクト2}: {ファイルパス}

**テンプレート**:
```python
{汎用化されたコードテンプレート}
```
```

## 実行ルール

### 開発者責任
- 実装時に`@reusable`タグでマーキング
- 同じパターンを2回目に使用する時にドキュメント化検討
- 月次で未ドキュメント化の再利用コードをチェック

### 自動化対象
- 使用回数カウント（grep検索ベース）
- テンプレート生成（コードから自動抽出）
- ドキュメントファイル更新（既存ファイルへの追記）

## 品質基準

### 必須要素
- **具体的な使用例**（コピペで動作する）
- **制約・前提条件**の明記
- **エラーハンドリング**パターン

### 除外要素
- 冗長な説明（コードを見れば分かる内容）
- プロジェクト固有の詳細
- 標準ライブラリの使い方説明